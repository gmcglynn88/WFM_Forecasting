<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WFM Forecasting Tool | Erlang C Model</title>
  <style>
    :root {
      --primary-color: #63AB8F;
      --secondary-color: #4A8C7D;
      --border-color: #DEE2E6;
      --light-bg: #F8F9FA;
      --card-bg: #FFFFFF;
      --text-color: #2C3E50;
      --text-light: #6C757D;
      --warn: #f59e0b;
      --bad: #dc2626;
      --good: #16a34a;
      --chart-1: #4A8C7D;
      --chart-2: #63AB8F;
      --chart-3: #A8D5BA;
      --chart-4: #C7E8D3;
    }
    
    body, h1, h2, h3, h4, h5, h6, p, div, span, label, button, input, select, textarea, th, td, li, ul, ol {
      font-family: 'Aptos', 'Segoe UI', system-ui, -apple-system, Arial, sans-serif;
    }
    
    body {
      margin: 0;
      padding: 20px;
      background: var(--light-bg);
      color: var(--text-color);
      min-height: 100vh;
    }
    
    .container {
      max-width: 1600px;
      margin: 0 auto;
    }

    /* Header */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--border-color);
    }
    
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .brand h1 {
      margin: 0;
      font-size: 28px;
      color: var(--secondary-color);
      font-weight: 800;
    }
    
    .brand .subtitle {
      color: var(--text-light);
      font-weight: 600;
      font-size: 14px;
      margin-left: 8px;
    }
    
    .status-indicator {
      background: white;
      padding: 10px 16px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      font-size: 14px;
      min-width: 200px;
      text-align: center;
    }

    /* Main Layout */
    .main-layout {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
    }
    
    .cards-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }
    
    @media (max-width: 768px) {
      .cards-row {
        grid-template-columns: 1fr;
      }
    }

    /* Card Styling */
    .card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 1px 3px rgba(0,0,0,.08);
    }
    
    .card:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,.1);
    }
    
    .card-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--border-color);
    }
    
    .card-title h2 {
      margin: 0;
      font-size: 18px;
      font-weight: 700;
      color: var(--secondary-color);
    }
    
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 900;
      background: rgba(99, 171, 143, 0.1);
      color: var(--secondary-color);
      border: 1px solid rgba(99, 171, 143, 0.3);
    }

    /* Form Controls */
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
      color: var(--text-color);
    }
    
    select, input, textarea, button {
      padding: 12px 14px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background: var(--card-bg);
      font-size: 14px;
      width: 100%;
      box-sizing: border-box;
      transition: all 0.2s ease;
    }
    
    select:focus, input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(99, 171, 143, 0.1);
    }
    
    input[type="file"] {
      padding: 10px;
      background: #fff;
      border: 2px dashed var(--border-color);
    }
    
    input[type="file"]:hover {
      border-color: var(--primary-color);
    }
    
    button {
      background: var(--primary-color);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: background .2s;
      border: none;
    }
    
    button:hover {
      background: var(--secondary-color);
      transform: translateY(-1px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    
    button.secondary {
      background: #fff;
      color: var(--primary-color);
      border: 2px solid var(--primary-color);
    }
    
    button.secondary:hover {
      background: rgba(99, 171, 143, 0.1);
      border-color: var(--secondary-color);
      color: var(--secondary-color);
    }
    
    button:disabled {
      background: var(--text-light);
      cursor: not-allowed;
      transform: none !important;
      box-shadow: none !important;
    }

    /* Row layouts */
    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    
    .row-3 {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 16px;
    }
    
    .row-4 {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
    }
    
    @media (max-width: 768px) {
      .row, .row-3, .row-4 {
        grid-template-columns: 1fr;
      }
    }
    
    .full-width {
      grid-column: 1 / -1;
    }

    /* Button Groups */
    .btn-group {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid var(--border-color);
    }
    
    .btn-group button {
      flex: 1;
      min-width: 140px;
    }

    /* Day Distribution Grid */
    .day-distribution-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 12px;
      margin-top: 10px;
    }
    
    .day-cell {
      text-align: center;
    }
    
    .day-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--secondary-color);
      margin-bottom: 4px;
    }
    
    .day-input {
      width: 70px;
      text-align: center;
      margin: 0 auto;
      padding: 8px;
    }
    
    @media (max-width: 768px) {
      .day-distribution-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    @media (max-width: 480px) {
      .day-distribution-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* Interval Pattern Visualization */
    .pattern-visualization {
      height: 120px;
      background: rgba(99, 171, 143, 0.05);
      border-radius: 8px;
      margin-top: 16px;
      position: relative;
      overflow: hidden;
    }
    
    .pattern-bars {
      display: flex;
      height: 100%;
      align-items: flex-end;
      padding: 10px;
      gap: 2px;
    }
    
    .pattern-bar {
      flex: 1;
      background: var(--chart-1);
      border-radius: 2px 2px 0 0;
      transition: height 0.3s ease;
      min-height: 2px;
    }

    /* Main Tabs */
    .main-tabs {
      display: flex;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 20px;
      background: white;
      border-radius: 8px 8px 0 0;
      overflow: hidden;
    }
    
    .main-tab {
      padding: 14px 24px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      color: var(--text-light);
      transition: all 0.2s;
      position: relative;
    }
    
    .main-tab.active {
      color: var(--primary-color);
      border-bottom-color: var(--primary-color);
      background: rgba(99, 171, 143, 0.05);
    }
    
    .main-tab:hover:not(.active) {
      background: rgba(99, 171, 143, 0.05);
      color: var(--secondary-color);
    }

    /* Sub Tabs */
    .sub-tabs {
      display: flex;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 20px;
    }
    
    .sub-tab {
      padding: 12px 20px;
      background: none;
      border: none;
      border-bottom: 2px solid transparent;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      color: var(--text-light);
      transition: all 0.2s;
    }
    
    .sub-tab.active {
      color: var(--primary-color);
      border-bottom-color: var(--primary-color);
    }
    
    .sub-tab:hover:not(.active) {
      color: var(--secondary-color);
    }

    /* Tab Content */
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }

    /* Results Section */
    .results-section {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 2px solid var(--border-color);
    }
    
    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    
    .results-header h2 {
      margin: 0;
      font-size: 24px;
      color: var(--secondary-color);
    }
    
    .summary-tiles {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin: 24px 0;
    }
    
    .tile {
      border: 1px solid var(--border-color);
      border-radius: 10px;
      padding: 20px;
      background: #fff;
      text-align: center;
    }
    
    .tile .label {
      color: var(--text-light);
      font-weight: 800;
      font-size: 13px;
      letter-spacing: .3px;
      text-transform: uppercase;
      margin-bottom: 8px;
    }
    
    .tile .value {
      font-size: 28px;
      font-weight: 900;
      margin-top: 4px;
      color: var(--secondary-color);
      line-height: 1.2;
    }
    
    .tile .subtext {
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-light);
      line-height: 1.4;
    }

    /* Forecast Views */
    .view-controls {
      background: white;
      padding: 16px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .view-group {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .view-btn {
      padding: 8px 16px;
      background: #fff;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .view-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    .view-btn:hover:not(.active) {
      background: rgba(99, 171, 143, 0.1);
      border-color: var(--primary-color);
    }
    
    .interval-selector {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .interval-btn {
      padding: 6px 12px;
      background: #fff;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .interval-btn.active {
      background: var(--secondary-color);
      color: white;
      border-color: var(--secondary-color);
    }

    /* Charts */
    .charts-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin: 24px 0;
    }
    
    @media (max-width: 1024px) {
      .charts-container {
        grid-template-columns: 1fr;
      }
    }
    
    .chart-card {
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 20px;
      background: #fff;
    }
    
    .chart-title {
      margin: 0 0 16px;
      color: var(--secondary-color);
      font-size: 16px;
      font-weight: 700;
    }
    
    canvas {
      display: block;
      width: 100% !important;
      height: 300px !important;
    }

    /* Forecast Table */
    .table-container {
      max-height: 600px;
      overflow: auto;
      border: 1px solid var(--border-color);
      border-radius: 12px;
      margin-top: 24px;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
      background: white;
    }
    
    thead th {
      background: var(--primary-color);
      color: white;
      text-align: left;
      padding: 16px 12px;
      border-bottom: 1px solid var(--border-color);
      position: sticky;
      top: 0;
      z-index: 10;
      font-weight: 700;
      font-size: 13px;
      letter-spacing: .3px;
    }
    
    tbody td {
      padding: 12px;
      border-bottom: 1px solid var(--border-color);
      vertical-align: middle;
    }
    
    tbody tr:hover {
      background: rgba(99, 171, 143, 0.05);
    }
    
    tbody tr:last-child td {
      border-bottom: none;
    }
    
    .center {
      text-align: center;
    }
    
    .right {
      text-align: right;
    }

    /* Help Text */
    .help-text {
      font-size: 12px;
      color: var(--text-light);
      margin-top: 6px;
      line-height: 1.4;
    }
    
    .note {
      background: rgba(99, 171, 143, 0.05);
      border-left: 4px solid var(--primary-color);
      border-radius: 8px;
      padding: 14px;
      margin-top: 20px;
      font-size: 13px;
      color: var(--text-color);
      line-height: 1.5;
    }

    /* Progress Bar */
    .progress-bar {
      height: 8px;
      background: var(--border-color);
      border-radius: 4px;
      overflow: hidden;
      margin: 20px 0;
    }
    
    .progress-fill {
      height: 100%;
      background: var(--primary-color);
      transition: width 0.3s ease;
    }

    /* Adjustment Controls */
    .adjustment-controls {
      background: white;
      padding: 16px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      margin: 20px 0;
    }
    
    .adjustment-row {
      display: flex;
      gap: 16px;
      align-items: center;
    }
    
    .adjustment-input {
      flex: 1;
      max-width: 200px;
    }
    
    .adjustment-label {
      min-width: 120px;
      font-weight: 600;
      font-size: 14px;
    }
    
    .adjustment-value {
      min-width: 60px;
      text-align: center;
      font-weight: 600;
      color: var(--secondary-color);
    }

    /* AHT Pattern Grid */
    .aht-pattern-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 12px;
      margin-top: 10px;
    }
    
    .aht-cell {
      text-align: center;
    }
    
    .aht-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--secondary-color);
      margin-bottom: 4px;
    }
    
    .aht-input {
      width: 80px;
      text-align: center;
      margin: 0 auto;
      padding: 8px;
    }

    /* Modal for Erlang C Explanation */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal {
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .modal-header {
      padding: 20px 24px;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--primary-color);
      color: white;
      border-radius: 12px 12px 0 0;
    }
    
    .modal-header h2 {
      margin: 0;
      font-size: 20px;
    }
    
    .modal-close {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
    }
    
    .modal-body {
      padding: 24px;
    }

    /* Footer */
    .footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid var(--border-color);
      text-align: center;
      color: var(--text-light);
      font-size: 12px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      
      .card {
        padding: 16px;
      }
      
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }
      
      .status-indicator {
        width: 100%;
        min-width: unset;
      }
      
      .main-tab, .sub-tab {
        padding: 12px 16px;
        font-size: 14px;
      }
      
      .view-controls {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
      }
      
      .adjustment-row {
        flex-direction: column;
        align-items: stretch;
      }
      
      .adjustment-input {
        max-width: 100%;
      }
      
      .aht-pattern-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--primary-color);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--secondary-color);
    }
  </style>
  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="brand">
        <h1>WFM Forecasting Tool</h1>
        <span class="subtitle">Erlang C Model</span>
      </div>
      <div class="status-indicator" id="statusIndicator">
        Ready for forecast input
      </div>
    </div>

    <!-- Main Tabs -->
    <div class="main-tabs">
      <button class="main-tab active" data-main-tab="settings">‚öôÔ∏è Forecast Settings</button>
      <button class="main-tab" data-main-tab="forecast">üìä Forecast View</button>
      <button class="main-tab" data-main-tab="adjustments">üîß Forecast Adjustments</button>
    </div>

    <!-- Settings Tab -->
    <div id="settingsContent" class="tab-content active">
      <div class="sub-tabs">
        <button class="sub-tab active" data-sub-tab="dataSource">Data Source</button>
        <button class="sub-tab" data-sub-tab="erlangParams">Erlang C Parameters</button>
        <button class="sub-tab" data-sub-tab="patterns">Patterns & Distribution</button>
      </div>

      <!-- Data Source Content -->
      <div id="dataSourceContent" class="tab-content active">
        <div class="cards-row">
          <div class="card">
            <div class="card-title">
              <h2>Historical Data</h2>
              <span class="badge">CSV</span>
            </div>
            <div class="form-group">
              <label for="historicalFile">Upload Historical Data</label>
              <input type="file" id="historicalFile" accept=".csv">
              <div class="help-text">
                Required columns: datetime, queue, volume, aht_seconds<br>
                Optional columns: service_level, occupancy, abandonment_rate
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">
              <h2>Manual Input</h2>
              <span class="badge">Quick Setup</span>
            </div>
            <div class="form-group">
              <label for="totalWeeklyVolume">Total Weekly Volume</label>
              <input type="number" id="totalWeeklyVolume" min="1" value="1000" step="1">
              <div class="help-text">Total contacts expected per week</div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">
              <h2>Import Forecast</h2>
              <span class="badge">External</span>
            </div>
            <div class="form-group">
              <label for="importFile">Import Forecast Data</label>
              <input type="file" id="importFile" accept=".csv">
              <div class="help-text">
                Format: date, time, queue, volume, aht, required_staff<br>
                Or use generated forecasts from other systems
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Erlang C Parameters Content -->
      <div id="erlangParamsContent" class="tab-content">
        <div class="cards-row">
          <div class="card">
            <div class="card-title">
              <h2>Service Level Targets</h2>
              <span class="badge">SLA</span>
            </div>
            <div class="row">
              <div class="form-group">
                <label for="targetServiceLevel">Service Level (%)</label>
                <input type="number" id="targetServiceLevel" min="1" max="99" value="80" step="1">
                <div class="help-text">e.g., 80% answered within target time</div>
              </div>

              <div class="form-group">
                <label for="targetAnswerTime">Answer Time (seconds)</label>
                <input type="number" id="targetAnswerTime" min="1" value="20" step="1">
                <div class="help-text">Target time to answer</div>
              </div>
            </div>

            <div class="form-group">
              <label for="maxOccupancy">Maximum Occupancy (%)</label>
              <input type="number" id="maxOccupancy" min="50" max="95" value="85" step="1">
              <div class="help-text">Maximum agent utilization</div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">
              <h2>Contact Parameters</h2>
              <span class="badge">AHT & Shrinkage</span>
            </div>
            <div class="row">
              <div class="form-group">
                <label for="avgAHT">Average Handle Time (seconds)</label>
                <input type="number" id="avgAHT" min="1" value="300" step="1">
                <div class="help-text">Average contact duration</div>
              </div>

              <div class="form-group">
                <label for="shrinkageRate">Shrinkage Rate (%)</label>
                <input type="number" id="shrinkageRate" min="0" max="50" value="30" step="0.5">
                <div class="help-text">Breaks, meetings, training</div>
              </div>
            </div>

            <div class="form-group">
              <label for="abandonmentRate">Abandonment Rate (%)</label>
              <input type="number" id="abandonmentRate" min="0" max="50" value="5" step="0.1">
              <div class="help-text">Expected abandonment rate</div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">
              <h2>Forecast Period</h2>
              <span class="badge">Timeline</span>
            </div>
            <div class="form-group">
              <label for="forecastPeriod">Forecast Duration</label>
              <select id="forecastPeriod">
                <option value="7">7 days (1 week)</option>
                <option value="14">14 days (2 weeks)</option>
                <option value="30" selected>30 days (1 month)</option>
                <option value="60">60 days (2 months)</option>
                <option value="90">90 days (3 months)</option>
              </select>
            </div>

            <div class="row">
              <div class="form-group">
                <label for="seasonalityFactor">Seasonality Factor (%)</label>
                <input type="number" id="seasonalityFactor" min="0" max="200" value="100" step="1">
                <div class="help-text">Adjust for weekly/monthly patterns</div>
              </div>

              <div class="form-group">
                <label for="growthRate">Growth Rate (%)</label>
                <input type="number" id="growthRate" min="-50" max="200" value="0" step="0.5">
                <div class="help-text">Expected increase/decrease in volume</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Patterns Content -->
      <div id="patternsContent" class="tab-content">
        <div class="cards-row">
          <div class="card">
            <div class="card-title">
              <h2>Day of Week Distribution</h2>
              <span class="badge">Weekly Pattern</span>
            </div>
            <div class="form-group">
              <label>Daily Percentage Distribution (%)</label>
              <div class="day-distribution-grid">
                <div class="day-cell">
                  <div class="day-label">Mon</div>
                  <input type="number" class="day-input" id="dayMon" min="0" max="100" value="16" step="0.1">
                </div>
                <div class="day-cell">
                  <div class="day-label">Tue</div>
                  <input type="number" class="day-input" id="dayTue" min="0" max="100" value="17" step="0.1">
                </div>
                <div class="day-cell">
                  <div class="day-label">Wed</div>
                  <input type="number" class="day-input" id="dayWed" min="0" max="100" value="17" step="0.1">
                </div>
                <div class="day-cell">
                  <div class="day-label">Thu</div>
                  <input type="number" class="day-input" id="dayThu" min="0" max="100" value="17" step="0.1">
                </div>
                <div class="day-cell">
                  <div class="day-label">Fri</div>
                  <input type="number" class="day-input" id="dayFri" min="0" max="100" value="17" step="0.1">
                </div>
                <div class="day-cell">
                  <div class="day-label">Sat</div>
                  <input type="number" class="day-input" id="daySat" min="0" max="100" value="10" step="0.1">
                </div>
                <div class="day-cell">
                  <div class="day-label">Sun</div>
                  <input type="number" class="day-input" id="daySun" min="0" max="100" value="6" step="0.1">
                </div>
              </div>
              <div class="help-text" id="distributionTotal">Total: 100%</div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">
              <h2>Hourly Distribution Pattern</h2>
              <span class="badge">Intraday</span>
            </div>
            <div class="form-group">
              <label for="intervalPattern">Interval Distribution Pattern</label>
              <select id="intervalPattern">
                <option value="standard">Standard (Peak at 10am-2pm)</option>
                <option value="morning">Morning Peak (8am-12pm)</option>
                <option value="evening">Evening Peak (2pm-6pm)</option>
                <option value="flat">Flat Distribution</option>
                <option value="custom">Custom Pattern</option>
              </select>
            </div>

            <div id="patternVisualization" class="pattern-visualization">
              <div class="pattern-bars" id="patternBars">
                <!-- Pattern bars will be generated by JavaScript -->
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-title">
              <h2>AHT Variation Pattern</h2>
              <span class="badge">Time of Day</span>
            </div>
            <div class="form-group">
              <label>Handle Time by Time Period (% of Average)</label>
              <div class="aht-pattern-grid">
                <div class="aht-cell">
                  <div class="aht-label">12am-4am</div>
                  <input type="number" class="aht-input" data-period="0" min="50" max="200" value="90" step="1">
                </div>
                <div class="aht-cell">
                  <div class="aht-label">4am-8am</div>
                  <input type="number" class="aht-input" data-period="1" min="50" max="200" value="95" step="1">
                </div>
                <div class="aht-cell">
                  <div class="aht-label">8am-12pm</div>
                  <input type="number" class="aht-input" data-period="2" min="50" max="200" value="105" step="1">
                </div>
                <div class="aht-cell">
                  <div class="aht-label">12pm-4pm</div>
                  <input type="number" class="aht-input" data-period="3" min="50" max="200" value="100" step="1">
                </div>
                <div class="aht-cell">
                  <div class="aht-label">4pm-8pm</div>
                  <input type="number" class="aht-input" data-period="4" min="50" max="200" value="95" step="1">
                </div>
                <div class="aht-cell">
                  <div class="aht-label">8pm-12am</div>
                  <input type="number" class="aht-input" data-period="5" min="50" max="200" value="85" step="1">
                </div>
              </div>
              <div class="help-text">Enter percentages relative to average AHT (100% = average)</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Generate Button -->
      <div class="card">
        <div class="card-title">
          <h2>Generate Forecast</h2>
          <span class="badge">Calculate</span>
        </div>
        
        <div class="form-group">
          <label for="confidenceLevel">Confidence Level</label>
          <select id="confidenceLevel">
            <option value="80">80% (Standard)</option>
            <option value="85">85%</option>
            <option value="90">90% (Recommended)</option>
            <option value="95">95% (Conservative)</option>
          </select>
          <div class="help-text">Statistical confidence for staffing requirements</div>
        </div>

        <div class="btn-group">
          <button id="generateForecastBtn" class="primary">üìà Generate Forecast</button>
          <button id="clearForecastBtn" class="secondary">Clear Settings</button>
          <button id="downloadTemplateBtn" class="secondary">üì• Download Template</button>
        </div>

        <div class="progress-bar" id="progressBar" style="display: none;">
          <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
        </div>
      </div>
    </div>

    <!-- Forecast View Tab -->
    <div id="forecastContent" class="tab-content">
      <!-- View Controls -->
      <div class="view-controls">
        <div class="view-group">
          <span style="font-weight: 600; margin-right: 12px;">View:</span>
          <button class="view-btn active" data-view="table">üìã Table View</button>
          <button class="view-btn" data-view="chart">üìà Chart View</button>
          <button class="view-btn" data-view="summary">üìä Summary View</button>
        </div>
        
        <div class="interval-selector">
          <span style="font-weight: 600; margin-right: 12px;">Interval:</span>
          <button class="interval-btn active" data-interval="15">15 min</button>
          <button class="interval-btn" data-interval="30">30 min</button>
          <button class="interval-btn" data-interval="60">60 min</button>
          <button class="interval-btn" data-interval="day">Daily</button>
        </div>
        
        <div>
          <button id="exportViewBtn" class="secondary">üì§ Export View</button>
        </div>
      </div>

      <!-- Table View -->
      <div id="tableView" class="tab-content active">
        <div class="table-container">
          <table id="forecastTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>Day</th>
                <th class="center">Interval</th>
                <th class="right">Volume</th>
                <th class="right">AHT (s)</th>
                <th class="right">Required Staff</th>
                <th class="right">FTE</th>
                <th class="center">Service Level</th>
                <th class="center">Occupancy</th>
              </tr>
            </thead>
            <tbody id="forecastTableBody">
              <tr>
                <td colspan="9" class="center" style="padding: 40px; color: var(--text-light);">
                  No forecast generated yet. Configure parameters and click "Generate Forecast".
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Chart View -->
      <div id="chartView" class="tab-content">
        <div class="charts-container">
          <div class="chart-card">
            <h3 class="chart-title">Volume Forecast</h3>
            <canvas id="volumeChart"></canvas>
          </div>
          <div class="chart-card">
            <h3 class="chart-title">Staffing Requirements</h3>
            <canvas id="staffingChart"></canvas>
          </div>
          <div class="chart-card">
            <h3 class="chart-title">Service Level Forecast</h3>
            <canvas id="slChart"></canvas>
          </div>
          <div class="chart-card">
            <h3 class="chart-title">Occupancy Levels</h3>
            <canvas id="occupancyChart"></canvas>
          </div>
        </div>
      </div>

      <!-- Summary View -->
      <div id="summaryView" class="tab-content">
        <div class="summary-tiles">
          <div class="tile">
            <div class="label">Total Volume</div>
            <div class="value" id="resultTotalVolume">‚Äî</div>
            <div class="subtext">Forecast period</div>
          </div>
          <div class="tile">
            <div class="label">Required FTE</div>
            <div class="value" id="resultRequiredFTE">‚Äî</div>
            <div class="subtext">Full-time equivalent</div>
          </div>
          <div class="tile">
            <div class="label">Peak Staff/Hour</div>
            <div class="value" id="resultPeakStaff">‚Äî</div>
            <div class="subtext">Maximum requirement</div>
          </div>
          <div class="tile">
            <div class="label">Avg Service Level</div>
            <div class="value" id="resultAvgSL">‚Äî</div>
            <div class="subtext">Weighted average</div>
          </div>
          <div class="tile">
            <div class="label">Total Hours</div>
            <div class="value" id="resultTotalHours">‚Äî</div>
            <div class="subtext">Work hours required</div>
          </div>
          <div class="tile">
            <div class="label">Avg Occupancy</div>
            <div class="value" id="resultAvgOccupancy">‚Äî</div>
            <div class="subtext">Agent utilization</div>
          </div>
        </div>

        <div class="chart-card" style="margin-top: 24px;">
          <h3 class="chart-title">Daily Summary</h3>
          <canvas id="dailySummaryChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Adjustments Tab -->
    <div id="adjustmentsContent" class="tab-content">
      <div class="adjustment-controls">
        <div class="adjustment-row">
          <div class="adjustment-label">Global Volume Adjustment:</div>
          <input type="range" class="adjustment-input" id="volumeAdjustSlider" min="-50" max="50" value="0" step="1">
          <div class="adjustment-value" id="volumeAdjustValue">0%</div>
          <button class="secondary" id="applyVolumeAdjust">Apply</button>
        </div>
        <div class="help-text">Adjust all volumes by this percentage. Positive increases, negative decreases.</div>
      </div>

      <div class="adjustment-controls">
        <div class="adjustment-row">
          <div class="adjustment-label">Day of Week Adjustment:</div>
          <select id="dayOfWeekSelect" style="flex: 1; max-width: 150px;">
            <option value="all">All Days</option>
            <option value="mon">Monday</option>
            <option value="tue">Tuesday</option>
            <option value="wed">Wednesday</option>
            <option value="thu">Thursday</option>
            <option value="fri">Friday</option>
            <option value="sat">Saturday</option>
            <option value="sun">Sunday</option>
          </select>
          <input type="range" class="adjustment-input" id="dayAdjustSlider" min="-50" max="50" value="0" step="1">
          <div class="adjustment-value" id="dayAdjustValue">0%</div>
          <button class="secondary" id="applyDayAdjust">Apply</button>
        </div>
        <div class="help-text">Adjust volumes for specific days of the week.</div>
      </div>

      <div class="adjustment-controls">
        <div class="adjustment-row">
          <div class="adjustment-label">Time Period Adjustment:</div>
          <select id="timePeriodSelect" style="flex: 1; max-width: 150px;">
            <option value="all">All Hours</option>
            <option value="morning">Morning (8am-12pm)</option>
            <option value="afternoon">Afternoon (12pm-4pm)</option>
            <option value="evening">Evening (4pm-8pm)</option>
            <option value="night">Night (8pm-8am)</option>
          </select>
          <input type="range" class="adjustment-input" id="timeAdjustSlider" min="-50" max="50" value="0" step="1">
          <div class="adjustment-value" id="timeAdjustValue">0%</div>
          <button class="secondary" id="applyTimeAdjust">Apply</button>
        </div>
        <div class="help-text">Adjust volumes for specific time periods.</div>
      </div>

      <div class="adjustment-controls">
        <div class="adjustment-row">
          <div class="adjustment-label">Service Level Target:</div>
          <input type="range" class="adjustment-input" id="slAdjustSlider" min="70" max="95" value="80" step="1">
          <div class="adjustment-value" id="slAdjustValue">80%</div>
          <button class="secondary" id="applySLAdjust">Apply</button>
        </div>
        <div class="help-text">Adjust service level target and recalculate staffing.</div>
      </div>

      <div class="card" style="margin-top: 24px;">
        <div class="card-title">
          <h2>Adjustment Summary</h2>
          <span class="badge">Active Changes</span>
        </div>
        <div id="adjustmentSummary">
          <p style="color: var(--text-light); text-align: center; padding: 20px;">
            No adjustments applied yet.
          </p>
        </div>
        <div class="btn-group">
          <button id="saveAdjustmentsBtn" class="secondary">üíæ Save Adjustments</button>
          <button id="resetAdjustmentsBtn" class="secondary">üîÑ Reset All</button>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>WFM Forecasting Tool v2.0 | Professional Erlang C Forecasting with Advanced Visualization</p>
      <p>For support or questions, contact your WFM administrator</p>
    </div>
  </div>

  <!-- Modal for Erlang C Explanation -->
  <div id="erlangModal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h2>Erlang C Formula Explained</h2>
        <button class="modal-close" id="modalCloseBtn">&times;</button>
      </div>
      <div class="modal-body">
        <h3>What is Erlang C?</h3>
        <p>Erlang C is a mathematical formula used in queueing theory to calculate the probability that a customer will have to wait for service in a system with multiple servers (agents).</p>
        
        <h3>Key Inputs:</h3>
        <ul>
          <li><strong>Volume:</strong> Number of contacts expected</li>
          <li><strong>AHT:</strong> Average Handle Time per contact</li>
          <li><strong>Service Level:</strong> Target percentage of contacts answered within target time</li>
          <li><strong>Target Answer Time:</strong> Maximum acceptable wait time</li>
          <li><strong>Shrinkage:</strong> Time agents are unavailable (breaks, meetings, etc.)</li>
        </ul>
        
        <h3>How it Works:</h3>
        <p>The formula calculates the minimum number of agents required to achieve your service level target, considering contact arrival patterns and average handle times.</p>
        
        <p><strong>Formula:</strong> P(wait) = (A‚Åø/n!) / (Œ£(A·µè/k!) + (A‚Åø/n!)*((n/(n-A))))</p>
        <p>Where A = offered traffic (Erlangs), n = number of agents</p>
        
        <div class="note" style="margin-top: 20px;">
          <strong>Note:</strong> This tool uses Erlang C calculations to provide accurate staffing forecasts based on your specific parameters.
        </div>
      </div>
    </div>
  </div>

  <script>
    // DOM Elements
    const statusIndicator = document.getElementById('statusIndicator');
    const mainTabs = document.querySelectorAll('.main-tab');
    const subTabs = document.querySelectorAll('.sub-tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const generateForecastBtn = document.getElementById('generateForecastBtn');
    const clearForecastBtn = document.getElementById('clearForecastBtn');
    const downloadTemplateBtn = document.getElementById('downloadTemplateBtn');
    const progressBar = document.getElementById('progressBar');
    const progressFill = document.getElementById('progressFill');
    const patternBars = document.getElementById('patternBars');
    const distributionInputs = document.querySelectorAll('.day-input');
    const distributionTotal = document.getElementById('distributionTotal');
    const ahtInputs = document.querySelectorAll('.aht-input');
    const viewButtons = document.querySelectorAll('.view-btn');
    const intervalButtons = document.querySelectorAll('.interval-btn');
    const exportViewBtn = document.getElementById('exportViewBtn');
    const erlangModal = document.getElementById('erlangModal');
    const modalCloseBtn = document.getElementById('modalCloseBtn');

    // Adjustment elements
    const volumeAdjustSlider = document.getElementById('volumeAdjustSlider');
    const volumeAdjustValue = document.getElementById('volumeAdjustValue');
    const applyVolumeAdjust = document.getElementById('applyVolumeAdjust');
    const dayAdjustSlider = document.getElementById('dayAdjustSlider');
    const dayAdjustValue = document.getElementById('dayAdjustValue');
    const applyDayAdjust = document.getElementById('applyDayAdjust');
    const timeAdjustSlider = document.getElementById('timeAdjustSlider');
    const timeAdjustValue = document.getElementById('timeAdjustValue');
    const applyTimeAdjust = document.getElementById('applyTimeAdjust');
    const slAdjustSlider = document.getElementById('slAdjustSlider');
    const slAdjustValue = document.getElementById('slAdjustValue');
    const applySLAdjust = document.getElementById('applySLAdjust');
    const saveAdjustmentsBtn = document.getElementById('saveAdjustmentsBtn');
    const resetAdjustmentsBtn = document.getElementById('resetAdjustmentsBtn');
    const adjustmentSummary = document.getElementById('adjustmentSummary');

    // Forecast data storage
    let forecastData = {
      type: 'manual',
      parameters: {},
      results: null,
      rawData: [],
      adjustments: [],
      intervalView: '60',
      currentView: 'table'
    };

    // Initialize pattern visualization
    function initializePatternVisualization() {
      const patterns = {
        standard: [2, 3, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 20, 18, 16, 14, 12, 10, 8, 6, 4, 3, 2, 1],
        morning: [1, 2, 5, 10, 15, 20, 25, 30, 35, 40, 35, 30, 25, 20, 15, 10, 5, 3, 2, 1, 1, 1, 1, 1],
        evening: [1, 1, 1, 1, 1, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 25, 20, 15, 10],
        flat: Array(24).fill(12.5)
      };

      function renderPattern(patternName) {
        patternBars.innerHTML = '';
        const pattern = patterns[patternName] || patterns.standard;
        
        pattern.forEach(value => {
          const bar = document.createElement('div');
          bar.className = 'pattern-bar';
          bar.style.height = `${value * 3}px`;
          bar.title = `${value}%`;
          patternBars.appendChild(bar);
        });
      }

      renderPattern('standard');
      
      document.getElementById('intervalPattern').addEventListener('change', function() {
        renderPattern(this.value);
      });
    }

    // Calculate day distribution total
    function updateDistributionTotal() {
      let total = 0;
      distributionInputs.forEach(input => {
        total += parseFloat(input.value) || 0;
      });
      distributionTotal.textContent = `Total: ${total.toFixed(1)}%`;
      return total;
    }

    // Update slider values
    volumeAdjustSlider.addEventListener('input', function() {
      volumeAdjustValue.textContent = `${this.value}%`;
    });

    dayAdjustSlider.addEventListener('input', function() {
      dayAdjustValue.textContent = `${this.value}%`;
    });

    timeAdjustSlider.addEventListener('input', function() {
      timeAdjustValue.textContent = `${this.value}%`;
    });

    slAdjustSlider.addEventListener('input', function() {
      slAdjustValue.textContent = `${this.value}%`;
    });

    // Tab switching
    mainTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        const tabName = this.getAttribute('data-main-tab');
        
        // Update active tab
        mainTabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        // Show corresponding content
        tabContents.forEach(content => {
          content.classList.remove('active');
          if (content.id === `${tabName}Content`) {
            content.classList.add('active');
          }
        });
        
        updateStatus(`Viewing ${tabName}`);
        
        // If forecast tab, update display if data exists
        if (tabName === 'forecast' && forecastData.results) {
          updateForecastDisplay();
        }
      });
    });

    subTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        const tabName = this.getAttribute('data-sub-tab');
        
        // Update active tab
        subTabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        // Show corresponding content
        const subContents = document.querySelectorAll('#settingsContent .tab-content');
        subContents.forEach(content => {
          content.classList.remove('active');
          if (content.id === `${tabName}Content`) {
            content.classList.add('active');
          }
        });
      });
    });

    // View switching
    viewButtons.forEach(btn => {
      btn.addEventListener('click', function() {
        const viewName = this.getAttribute('data-view');
        
        // Update active button
        viewButtons.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        // Show corresponding view
        const viewContents = document.querySelectorAll('#forecastContent .tab-content');
        viewContents.forEach(content => {
          content.classList.remove('active');
          if (content.id === `${viewName}View`) {
            content.classList.add('active');
          }
        });
        
        forecastData.currentView = viewName;
        
        // Update view if data exists
        if (forecastData.results) {
          updateForecastDisplay();
        }
      });
    });

    // Interval switching
    intervalButtons.forEach(btn => {
      btn.addEventListener('click', function() {
        const interval = this.getAttribute('data-interval');
        
        // Update active button
        intervalButtons.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        forecastData.intervalView = interval;
        
        // Update view if data exists
        if (forecastData.results) {
          updateForecastDisplay();
        }
      });
    });

    // Erlang C calculation functions
    class ErlangCalculator {
      constructor() {
        this.confidenceFactors = {
          80: 0.84,
          85: 1.04,
          90: 1.28,
          95: 1.64
        };
      }

      erlangC(A, N) {
        if (N <= 0 || A <= 0) return 0;
        if (N <= A) return 1;
        
        let sum = 1;
        let term = 1;
        
        for (let k = 1; k < N; k++) {
          term *= A / k;
          sum += term;
        }
        
        const top = term * (A / N) * (N / (N - A));
        const bottom = sum + top;
        
        return top / bottom;
      }

      serviceLevel(A, N, targetTime, aht) {
        const Pw = this.erlangC(A, N);
        const exponent = -(N - A) * (targetTime / aht);
        return 1 - (Pw * Math.exp(exponent));
      }

      requiredAgents(volume, aht, targetSL, targetTime, intervalSeconds) {
        const lambda = volume / intervalSeconds;
        const A = lambda * aht;
        
        let N = Math.max(1, Math.ceil(A));
        let maxIterations = 100;
        
        while (this.serviceLevel(A, N, targetTime, aht) < targetSL && maxIterations-- > 0) {
          N++;
        }
        
        return N;
      }

      occupancy(volume, aht, agents, intervalSeconds) {
        if (agents <= 0) return 0;
        const lambda = volume / intervalSeconds;
        const A = lambda * aht;
        return Math.min(1, A / agents);
      }
    }

    const erlangCalculator = new ErlangCalculator();

    // Generate forecast
    async function generateForecast() {
      // Validate inputs
      const total = updateDistributionTotal();
      if (Math.abs(total - 100) > 0.1) {
        alert(`Day distribution must total 100% (currently ${total.toFixed(1)}%). Please adjust the percentages.`);
        return;
      }

      // Show progress
      progressBar.style.display = 'block';
      updateProgress(10);
      updateStatus('Starting forecast calculation...');

      // Collect parameters
      const params = {
        targetSL: parseFloat(document.getElementById('targetServiceLevel').value) / 100,
        targetTime: parseFloat(document.getElementById('targetAnswerTime').value),
        maxOccupancy: parseFloat(document.getElementById('maxOccupancy').value) / 100,
        avgAHT: parseFloat(document.getElementById('avgAHT').value),
        shrinkage: parseFloat(document.getElementById('shrinkageRate').value) / 100,
        abandonment: parseFloat(document.getElementById('abandonmentRate').value) / 100,
        confidence: parseFloat(document.getElementById('confidenceLevel').value) / 100,
        intervalLength: 60, // Base interval for generation
        forecastDays: parseInt(document.getElementById('forecastPeriod').value) || 30,
        seasonality: parseFloat(document.getElementById('seasonalityFactor').value) / 100,
        growth: parseFloat(document.getElementById('growthRate').value) / 100
      };

      forecastData.parameters = params;
      updateProgress(30);

      try {
        // Generate forecast data
        const forecastResults = await generateManualForecast(params);
        updateProgress(70);
        
        // Apply Erlang C calculations
        const finalResults = applyErlangCalculations(forecastResults, params);
        forecastData.results = finalResults;
        forecastData.rawData = forecastResults;
        
        updateProgress(90);
        
        // Switch to forecast view
        mainTabs.forEach(t => t.classList.remove('active'));
        document.querySelector('[data-main-tab="forecast"]').classList.add('active');
        
        tabContents.forEach(content => {
          content.classList.remove('active');
          if (content.id === 'forecastContent') {
            content.classList.add('active');
          }
        });
        
        updateForecastDisplay();
        updateProgress(100);
        
        setTimeout(() => {
          progressBar.style.display = 'none';
          progressFill.style.width = '0%';
        }, 1000);
        
        updateStatus('Forecast generated successfully');
        
      } catch (error) {
        console.error('Forecast generation error:', error);
        updateStatus('Error generating forecast: ' + error.message, true);
        progressBar.style.display = 'none';
      }
    }

    // Generate manual forecast with AHT variation
    async function generateManualForecast(params) {
      const totalWeeklyVolume = parseFloat(document.getElementById('totalWeeklyVolume').value);
      const intervalLength = params.intervalLength;
      
      // Get day distribution
      const dayDistribution = {
        mon: parseFloat(document.getElementById('dayMon').value) / 100,
        tue: parseFloat(document.getElementById('dayTue').value) / 100,
        wed: parseFloat(document.getElementById('dayWed').value) / 100,
        thu: parseFloat(document.getElementById('dayThu').value) / 100,
        fri: parseFloat(document.getElementById('dayFri').value) / 100,
        sat: parseFloat(document.getElementById('daySat').value) / 100,
        sun: parseFloat(document.getElementById('daySun').value) / 100
      };
      
      // Get volume pattern
      const patternName = document.getElementById('intervalPattern').value;
      const patterns = {
        standard: [0.02, 0.03, 0.04, 0.06, 0.08, 0.10, 0.12, 0.14, 0.16, 0.18, 0.20, 0.22, 0.20, 0.18, 0.16, 0.14, 0.12, 0.10, 0.08, 0.06, 0.04, 0.03, 0.02, 0.01],
        morning: [0.01, 0.02, 0.05, 0.10, 0.15, 0.20, 0.25, 0.30, 0.35, 0.40, 0.35, 0.30, 0.25, 0.20, 0.15, 0.10, 0.05, 0.03, 0.02, 0.01, 0.01, 0.01, 0.01, 0.01],
        evening: [0.01, 0.01, 0.01, 0.01, 0.01, 0.02, 0.04, 0.06, 0.08, 0.10, 0.12, 0.14, 0.16, 0.18, 0.20, 0.22, 0.24, 0.26, 0.28, 0.30, 0.25, 0.20, 0.15, 0.10],
        flat: Array(24).fill(1/24)
      };
      
      const hourlyPattern = patterns[patternName] || patterns.standard;
      
      // Get AHT pattern
      const ahtPattern = {};
      ahtInputs.forEach(input => {
        const period = parseInt(input.getAttribute('data-period'));
        ahtPattern[period] = parseFloat(input.value) / 100;
      });
      
      // Map hours to AHT periods
      const hourToPeriod = (hour) => {
        if (hour >= 0 && hour < 4) return 0;   // 12am-4am
        if (hour >= 4 && hour < 8) return 1;   // 4am-8am
        if (hour >= 8 && hour < 12) return 2;  // 8am-12pm
        if (hour >= 12 && hour < 16) return 3; // 12pm-4pm
        if (hour >= 16 && hour < 20) return 4; // 4pm-8pm
        return 5; // 8pm-12am
      };
      
      // Generate forecast days
      const results = [];
      const startDate = new Date();
      startDate.setHours(0, 0, 0, 0);
      
      const daysOfWeek = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
      
      for (let day = 0; day < params.forecastDays; day++) {
        const currentDate = new Date(startDate);
        currentDate.setDate(startDate.getDate() + day);
        
        const dayName = daysOfWeek[currentDate.getDate() % 7];
        const dayFactor = dayDistribution[dayName] || 0;
        
        // Calculate daily volume with growth and seasonality
        const dailyVolume = totalWeeklyVolume * dayFactor * params.seasonality * Math.pow(1 + params.growth, day/7);
        
        // Distribute across hours
        for (let hour = 0; hour < 24; hour++) {
          const hourFactor = hourlyPattern[hour];
          const hourlyVolume = dailyVolume * hourFactor;
          
          // Calculate AHT for this hour based on pattern
          const period = hourToPeriod(hour);
          const ahtFactor = ahtPattern[period] || 1;
          const hourlyAHT = params.avgAHT * ahtFactor;
          
          // Create interval entry
          const intervalStart = new Date(currentDate);
          intervalStart.setHours(hour, 0, 0, 0);
          
          results.push({
            date: intervalStart.toISOString().split('T')[0],
            time: `${String(hour).padStart(2, '0')}:00`,
            datetime: intervalStart,
            volume: Math.max(0, Math.round(hourlyVolume)),
            aht: Math.round(hourlyAHT),
            dayOfWeek: dayName,
            hour: hour,
            dayOfWeekIndex: currentDate.getDay()
          });
        }
      }
      
      return results;
    }

    // Apply Erlang C calculations
    function applyErlangCalculations(forecastData, params) {
      const intervalSeconds = 3600; // Hourly intervals
      
      return forecastData.map(item => {
        const volume = item.volume;
        const aht = item.aht;
        
        // Calculate required agents
        const requiredAgents = erlangCalculator.requiredAgents(
          volume,
          aht,
          params.targetSL,
          params.targetTime,
          intervalSeconds
        );
        
        // Apply shrinkage
        const requiredWithShrinkage = requiredAgents / (1 - params.shrinkage);
        
        // Calculate occupancy
        const occupancy = erlangCalculator.occupancy(
          volume,
          aht,
          requiredWithShrinkage,
          intervalSeconds
        );
        
        // Calculate service level
        const serviceLevel = erlangCalculator.serviceLevel(
          (volume * aht) / intervalSeconds,
          requiredWithShrinkage,
          params.targetTime,
          aht
        );
        
        // Calculate FTE (assuming 8-hour shifts)
        const fte = requiredWithShrinkage / 8;
        
        return {
          ...item,
          requiredAgents: Math.ceil(requiredAgents),
          requiredWithShrinkage: Math.ceil(requiredWithShrinkage),
          fte: Math.max(0.125, Math.ceil(fte * 8) / 8),
          serviceLevel: Math.min(1, serviceLevel),
          occupancy: Math.min(1, occupancy),
          workHours: (volume * aht) / 3600
        };
      });
    }

    // Update forecast display based on current view and interval
    function updateForecastDisplay() {
      if (!forecastData.results || forecastData.results.length === 0) return;
      
      const interval = forecastData.intervalView;
      const view = forecastData.currentView;
      
      let displayData = aggregateDataByInterval(forecastData.results, interval);
      
      if (view === 'table') {
        displayTableView(displayData, interval);
      } else if (view === 'chart') {
        displayChartView(displayData, interval);
      } else if (view === 'summary') {
        displaySummaryView(displayData);
      }
      
      updateSummaryTiles(displayData);
    }

    // Aggregate data by interval
    function aggregateDataByInterval(data, interval) {
      if (interval === 'day') {
        // Aggregate by day
        const dayMap = new Map();
        
        data.forEach(item => {
          const dateKey = item.date;
          if (!dayMap.has(dateKey)) {
            dayMap.set(dateKey, {
              date: item.date,
              dayOfWeek: item.dayOfWeek,
              volume: 0,
              aht: 0,
              requiredWithShrinkage: 0,
              fte: 0,
              serviceLevel: 0,
              occupancy: 0,
              workHours: 0,
              count: 0
            });
          }
          
          const dayData = dayMap.get(dateKey);
          dayData.volume += item.volume;
          dayData.aht += item.aht;
          dayData.requiredWithShrinkage += item.requiredWithShrinkage;
          dayData.fte += item.fte;
          dayData.serviceLevel += item.serviceLevel;
          dayData.occupancy += item.occupancy;
          dayData.workHours += item.workHours;
          dayData.count++;
        });
        
        // Calculate averages
        return Array.from(dayMap.values()).map(day => ({
          ...day,
          aht: Math.round(day.aht / day.count),
          serviceLevel: day.serviceLevel / day.count,
          occupancy: day.occupancy / day.count
        }));
        
      } else if (interval === '60') {
        // Already hourly, no aggregation needed
        return data;
        
      } else {
        // Aggregate to 15 or 30 minute intervals
        const intervalMinutes = parseInt(interval);
        const aggregated = [];
        
        for (let i = 0; i < data.length; i += 60/intervalMinutes) {
          const slice = data.slice(i, i + 60/intervalMinutes);
          if (slice.length === 0) continue;
          
          const first = slice[0];
          const aggregatedItem = {
            ...first,
            time: `${String(first.hour).padStart(2, '0')}:${String(((i % (60/intervalMinutes)) * intervalMinutes)).padStart(2, '0')}`,
            volume: 0,
            aht: 0,
            requiredWithShrinkage: 0,
            fte: 0,
            serviceLevel: 0,
            occupancy: 0,
            workHours: 0
          };
          
          slice.forEach(item => {
            aggregatedItem.volume += item.volume / (60/intervalMinutes);
            aggregatedItem.aht += item.aht / (60/intervalMinutes);
            aggregatedItem.requiredWithShrinkage += item.requiredWithShrinkage / (60/intervalMinutes);
            aggregatedItem.fte += item.fte / (60/intervalMinutes);
            aggregatedItem.serviceLevel += item.serviceLevel / (60/intervalMinutes);
            aggregatedItem.occupancy += item.occupancy / (60/intervalMinutes);
            aggregatedItem.workHours += item.workHours / (60/intervalMinutes);
          });
          
          aggregated.push(aggregatedItem);
        }
        
        return aggregated;
      }
    }

    // Display table view
    function displayTableView(data, interval) {
      const tableBody = document.getElementById('forecastTableBody');
      tableBody.innerHTML = '';
      
      // Show first 100 rows
      const displayRows = data.slice(0, 100);
      
      displayRows.forEach(result => {
        const date = new Date(result.date);
        const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${result.date}</td>
          <td>${dayNames[date.getDay()]}</td>
          <td class="center">${result.time}</td>
          <td class="right">${Math.round(result.volume)}</td>
          <td class="right">${Math.round(result.aht)}</td>
          <td class="right">${Math.round(result.requiredWithShrinkage)}</td>
          <td class="right">${result.fte.toFixed(2)}</td>
          <td class="center">${(result.serviceLevel * 100).toFixed(1)}%</td>
          <td class="center">${(result.occupancy * 100).toFixed(1)}%</td>
        `;
        tableBody.appendChild(row);
      });
      
      if (data.length > 100) {
        const moreRow = document.createElement('tr');
        moreRow.innerHTML = `
          <td colspan="9" class="center" style="padding: 20px; color: var(--text-light);">
            ... and ${data.length - 100} more intervals (${data.length} total)
          </td>
        `;
        tableBody.appendChild(moreRow);
      }
    }

    // Display chart view
    function displayChartView(data, interval) {
      // Group data for charts
      const labels = [];
      const volumes = [];
      const staff = [];
      const serviceLevels = [];
      const occupancies = [];
      
      const displayCount = Math.min(50, data.length);
      const step = Math.ceil(data.length / displayCount);
      
      for (let i = 0; i < data.length; i += step) {
        const item = data[i];
        labels.push(`${item.date} ${item.time}`);
        volumes.push(item.volume);
        staff.push(item.requiredWithShrinkage);
        serviceLevels.push(item.serviceLevel * 100);
        occupancies.push(item.occupancy * 100);
      }
      
      // Update or create charts
      updateChart('volumeChart', labels, volumes, 'Volume', 'bar', 'rgba(74, 140, 125, 0.7)');
      updateChart('staffingChart', labels, staff, 'Staff Required', 'line', 'rgba(99, 171, 143, 1)');
      updateChart('slChart', labels, serviceLevels, 'Service Level %', 'line', 'rgba(22, 163, 74, 1)');
      updateChart('occupancyChart', labels, occupancies, 'Occupancy %', 'line', 'rgba(245, 158, 11, 1)');
    }

    // Display summary view
    function displaySummaryView(data) {
      // Group by day of week
      const dayGroups = {};
      data.forEach(item => {
        const day = item.dayOfWeek;
        if (!dayGroups[day]) {
          dayGroups[day] = {
            volume: 0,
            staff: 0,
            sl: 0,
            occupancy: 0,
            count: 0
          };
        }
        dayGroups[day].volume += item.volume;
        dayGroups[day].staff += item.requiredWithShrinkage;
        dayGroups[day].sl += item.serviceLevel;
        dayGroups[day].occupancy += item.occupancy;
        dayGroups[day].count++;
      });
      
      const dayNames = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
      const volumeByDay = [];
      const staffByDay = [];
      const slByDay = [];
      
      dayNames.forEach(day => {
        const key = day.toLowerCase().substring(0, 3);
        if (dayGroups[key]) {
          volumeByDay.push(dayGroups[key].volume);
          staffByDay.push(dayGroups[key].staff / dayGroups[key].count);
          slByDay.push((dayGroups[key].sl / dayGroups[key].count) * 100);
        } else {
          volumeByDay.push(0);
          staffByDay.push(0);
          slByDay.push(0);
        }
      });
      
      // Update daily summary chart
      updateDailySummaryChart(dayNames, volumeByDay, staffByDay, slByDay);
    }

    // Update summary tiles
    function updateSummaryTiles(data) {
      const totalVolume = data.reduce((sum, r) => sum + r.volume, 0);
      const totalFTE = data.reduce((sum, r) => sum + r.fte, 0);
      const peakStaff = Math.max(...data.map(r => r.requiredWithShrinkage));
      const avgSL = data.reduce((sum, r) => sum + r.serviceLevel, 0) / data.length;
      const totalHours = data.reduce((sum, r) => sum + r.workHours, 0);
      const avgOccupancy = data.reduce((sum, r) => sum + r.occupancy, 0) / data.length;
      
      document.getElementById('resultTotalVolume').textContent = Math.round(totalVolume).toLocaleString();
      document.getElementById('resultRequiredFTE').textContent = totalFTE.toFixed(1);
      document.getElementById('resultPeakStaff').textContent = Math.round(peakStaff);
      document.getElementById('resultAvgSL').textContent = (avgSL * 100).toFixed(1) + '%';
      document.getElementById('resultTotalHours').textContent = Math.round(totalHours);
      document.getElementById('resultAvgOccupancy').textContent = (avgOccupancy * 100).toFixed(1) + '%';
    }

    // Update chart
    function updateChart(canvasId, labels, data, label, type, color) {
      const ctx = document.getElementById(canvasId).getContext('2d');
      
      if (window[canvasId + 'Chart']) {
        window[canvasId + 'Chart'].destroy();
      }
      
      window[canvasId + 'Chart'] = new Chart(ctx, {
        type: type,
        data: {
          labels: labels,
          datasets: [{
            label: label,
            data: data,
            backgroundColor: type === 'bar' ? color : 'rgba(255, 255, 255, 0)',
            borderColor: color,
            borderWidth: type === 'line' ? 2 : 0,
            fill: type === 'line',
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true
            },
            x: {
              ticks: {
                maxRotation: 45,
                minRotation: 45
              }
            }
          }
        }
      });
    }

    // Update daily summary chart
    function updateDailySummaryChart(labels, volumes, staff, serviceLevels) {
      const ctx = document.getElementById('dailySummaryChart').getContext('2d');
      
      if (window.dailySummaryChart) {
        window.dailySummaryChart.destroy();
      }
      
      window.dailySummaryChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [
            {
              label: 'Volume',
              data: volumes,
              backgroundColor: 'rgba(74, 140, 125, 0.7)',
              yAxisID: 'y'
            },
            {
              label: 'Avg Staff',
              data: staff,
              type: 'line',
              borderColor: 'rgba(99, 171, 143, 1)',
              backgroundColor: 'rgba(99, 171, 143, 0.1)',
              borderWidth: 2,
              fill: true,
              yAxisID: 'y1'
            },
            {
              label: 'Service Level %',
              data: serviceLevels,
              type: 'line',
              borderColor: 'rgba(22, 163, 74, 1)',
              borderWidth: 2,
              yAxisID: 'y2'
            }
          ]
        },
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false
          },
          scales: {
            y: {
              type: 'linear',
              display: true,
              position: 'left',
              title: {
                display: true,
                text: 'Volume'
              }
            },
            y1: {
              type: 'linear',
              display: true,
              position: 'right',
              title: {
                display: true,
                text: 'Avg Staff'
              },
              grid: {
                drawOnChartArea: false
              }
            },
            y2: {
              type: 'linear',
              display: false,
              position: 'right',
              min: 0,
              max: 100
            }
          }
        }
      });
    }

    // Adjustment functions
    applyVolumeAdjust.addEventListener('click', () => {
      const adjustment = parseFloat(volumeAdjustSlider.value) / 100;
      applyGlobalAdjustment('volume', adjustment);
    });

    applyDayAdjust.addEventListener('click', () => {
      const day = document.getElementById('dayOfWeekSelect').value;
      const adjustment = parseFloat(dayAdjustSlider.value) / 100;
      applyDayAdjustment(day, adjustment);
    });

    applyTimeAdjust.addEventListener('click', () => {
      const period = document.getElementById('timePeriodSelect').value;
      const adjustment = parseFloat(timeAdjustSlider.value) / 100;
      applyTimeAdjustment(period, adjustment);
    });

    applySLAdjust.addEventListener('click', () => {
      const newSL = parseFloat(slAdjustSlider.value) / 100;
      applyServiceLevelAdjustment(newSL);
    });

    function applyGlobalAdjustment(type, adjustment) {
      if (!forecastData.results) return;
      
      forecastData.results.forEach(item => {
        if (type === 'volume') {
          item.volume = Math.max(0, Math.round(item.volume * (1 + adjustment)));
        }
      });
      
      // Recalculate Erlang C
      const recalculated = applyErlangCalculations(forecastData.results, forecastData.parameters);
      forecastData.results = recalculated;
      
      // Record adjustment
      forecastData.adjustments.push({
        type: 'global',
        value: adjustment,
        timestamp: new Date().toISOString()
      });
      
      updateForecastDisplay();
      updateAdjustmentSummary();
      updateStatus(`Applied global ${type} adjustment: ${(adjustment * 100).toFixed(1)}%`);
    }

    function applyDayAdjustment(day, adjustment) {
      if (!forecastData.results) return;
      
      const dayMap = {
        'mon': 1, 'tue': 2, 'wed': 3, 'thu': 4, 'fri': 5, 'sat': 6, 'sun': 0
      };
      
      forecastData.results.forEach(item => {
        if (day === 'all' || item.dayOfWeekIndex === dayMap[day]) {
          item.volume = Math.max(0, Math.round(item.volume * (1 + adjustment)));
        }
      });
      
      // Recalculate Erlang C
      const recalculated = applyErlangCalculations(forecastData.results, forecastData.parameters);
      forecastData.results = recalculated;
      
      // Record adjustment
      forecastData.adjustments.push({
        type: 'day',
        day: day,
        value: adjustment,
        timestamp: new Date().toISOString()
      });
      
      updateForecastDisplay();
      updateAdjustmentSummary();
      updateStatus(`Applied ${day} adjustment: ${(adjustment * 100).toFixed(1)}%`);
    }

    function applyTimeAdjustment(period, adjustment) {
      if (!forecastData.results) return;
      
      forecastData.results.forEach(item => {
        const hour = item.hour;
        let apply = false;
        
        switch (period) {
          case 'all': apply = true; break;
          case 'morning': apply = hour >= 8 && hour < 12; break;
          case 'afternoon': apply = hour >= 12 && hour < 16; break;
          case 'evening': apply = hour >= 16 && hour < 20; break;
          case 'night': apply = hour >= 20 || hour < 8; break;
        }
        
        if (apply) {
          item.volume = Math.max(0, Math.round(item.volume * (1 + adjustment)));
        }
      });
      
      // Recalculate Erlang C
      const recalculated = applyErlangCalculations(forecastData.results, forecastData.parameters);
      forecastData.results = recalculated;
      
      // Record adjustment
      forecastData.adjustments.push({
        type: 'time',
        period: period,
        value: adjustment,
        timestamp: new Date().toISOString()
      });
      
      updateForecastDisplay();
      updateAdjustmentSummary();
      updateStatus(`Applied ${period} adjustment: ${(adjustment * 100).toFixed(1)}%`);
    }

    function applyServiceLevelAdjustment(newSL) {
      if (!forecastData.results) return;
      
      // Update parameters
      forecastData.parameters.targetSL = newSL;
      
      // Recalculate Erlang C with new SL
      const recalculated = applyErlangCalculations(forecastData.results, forecastData.parameters);
      forecastData.results = recalculated;
      
      // Record adjustment
      forecastData.adjustments.push({
        type: 'service_level',
        value: newSL,
        timestamp: new Date().toISOString()
      });
      
      updateForecastDisplay();
      updateAdjustmentSummary();
      updateStatus(`Service level target updated to ${(newSL * 100).toFixed(1)}%`);
    }

    function updateAdjustmentSummary() {
      if (forecastData.adjustments.length === 0) {
        adjustmentSummary.innerHTML = `
          <p style="color: var(--text-light); text-align: center; padding: 20px;">
            No adjustments applied yet.
          </p>
        `;
        return;
      }
      
      const recent = forecastData.adjustments.slice(-5).reverse();
      let html = '<div style="padding: 10px;">';
      
      recent.forEach(adj => {
        let description = '';
        switch (adj.type) {
          case 'global':
            description = `Global volume ${adj.value >= 0 ? '+' : ''}${(adj.value * 100).toFixed(1)}%`;
            break;
          case 'day':
            description = `${adj.day} volume ${adj.value >= 0 ? '+' : ''}${(adj.value * 100).toFixed(1)}%`;
            break;
          case 'time':
            description = `${adj.period} volume ${adj.value >= 0 ? '+' : ''}${(adj.value * 100).toFixed(1)}%`;
            break;
          case 'service_level':
            description = `Service level target ${(adj.value * 100).toFixed(1)}%`;
            break;
        }
        
        const time = new Date(adj.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        html += `
          <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border-color);">
            <span>${description}</span>
            <span style="color: var(--text-light); font-size: 12px;">${time}</span>
          </div>
        `;
      });
      
      html += '</div>';
      adjustmentSummary.innerHTML = html;
    }

    // Helper functions
    function updateProgress(percent) {
      progressFill.style.width = `${percent}%`;
    }
    
    function updateStatus(message, isError = false) {
      statusIndicator.textContent = message;
      statusIndicator.style.color = isError ? 'var(--bad)' : 'var(--text-color)';
    }
    
    function clearForecast() {
      forecastData = {
        type: 'manual',
        parameters: {},
        results: null,
        rawData: [],
        adjustments: [],
        intervalView: '60',
        currentView: 'table'
      };
      
      // Reset form values
      document.getElementById('totalWeeklyVolume').value = 1000;
      document.querySelectorAll('.day-input').forEach((input, index) => {
        const defaults = [16, 17, 17, 17, 17, 10, 6];
        input.value = defaults[index];
      });
      updateDistributionTotal();
      
      // Reset adjustment sliders
      volumeAdjustSlider.value = 0;
      volumeAdjustValue.textContent = '0%';
      dayAdjustSlider.value = 0;
      dayAdjustValue.textContent = '0%';
      timeAdjustSlider.value = 0;
      timeAdjustValue.textContent = '0%';
      slAdjustSlider.value = 80;
      slAdjustValue.textContent = '80%';
      
      updateAdjustmentSummary();
      updateStatus('Settings cleared');
    }
    
    function downloadTemplate() {
      const template = `date,time,queue,volume,aht_seconds,service_level
2024-01-15,08:00,Voice - Sales,25,350,0.85
2024-01-15,09:00,Voice - Sales,30,360,0.82
2024-01-15,10:00,Voice - Sales,35,340,0.88
2024-01-15,11:00,Voice - Sales,40,330,0.80
2024-01-15,12:00,Voice - Sales,45,320,0.78
2024-01-15,13:00,Voice - Sales,40,310,0.85
2024-01-15,14:00,Voice - Sales,35,300,0.90
2024-01-15,15:00,Voice - Sales,30,290,0.92`;
      
      const blob = new Blob([template], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'forecast_template.csv';
      link.click();
    }
    
    function exportView() {
      if (!forecastData.results || forecastData.results.length === 0) {
        alert('No forecast results to export');
        return;
      }
      
      const interval = forecastData.intervalView;
      const data = aggregateDataByInterval(forecastData.results, interval);
      
      const headers = ['Date', 'Time', 'Volume', 'AHT_Seconds', 'Required_Staff', 'FTE', 'Service_Level', 'Occupancy'];
      const rows = data.map(result => [
        result.date,
        result.time || '00:00',
        Math.round(result.volume),
        Math.round(result.aht),
        Math.round(result.requiredWithShrinkage),
        result.fte.toFixed(3),
        (result.serviceLevel * 100).toFixed(1),
        (result.occupancy * 100).toFixed(1)
      ]);
      
      const csvContent = [headers.join(','), ...rows.map(row => row.join(','))].join('\n');
      
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `forecast_${interval}min_${new Date().toISOString().split('T')[0]}.csv`;
      link.click();
    }

    saveAdjustmentsBtn.addEventListener('click', () => {
      if (!forecastData.results) {
        alert('No forecast to save');
        return;
      }
      
      // In a real application, this would save to a server
      updateStatus('Adjustments saved (simulated)');
    });

    resetAdjustmentsBtn.addEventListener('click', () => {
      if (!forecastData.rawData || forecastData.rawData.length === 0) {
        alert('No original forecast data to revert to');
        return;
      }
      
      // Revert to original data
      const recalculated = applyErlangCalculations(forecastData.rawData, forecastData.parameters);
      forecastData.results = recalculated;
      forecastData.adjustments = [];
      
      updateForecastDisplay();
      updateAdjustmentSummary();
      updateStatus('All adjustments reset');
    });

    // Initialize
    initializePatternVisualization();
    updateDistributionTotal();
    updateStatus('Ready for forecast input');
    
    // Event Listeners
    generateForecastBtn.addEventListener('click', generateForecast);
    clearForecastBtn.addEventListener('click', clearForecast);
    downloadTemplateBtn.addEventListener('click', downloadTemplate);
    exportViewBtn.addEventListener('click', exportView);
    
    distributionInputs.forEach(input => {
      input.addEventListener('input', updateDistributionTotal);
    });
    
    // Prevent form submission
    document.addEventListener('submit', function(e) {
      e.preventDefault();
    });

    // Modal functionality
    const infoBtn = document.createElement('button');
    infoBtn.innerHTML = '‚ÑπÔ∏è Erlang C Info';
    infoBtn.style.cssText = `
      margin-left: 10px;
      background: rgba(99, 171, 143, 0.1);
      border: 1px solid var(--primary-color);
      color: var(--primary-color);
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
    `;
    infoBtn.addEventListener('click', () => {
      erlangModal.style.display = 'flex';
    });
    document.querySelector('.brand').appendChild(infoBtn);

    modalCloseBtn.addEventListener('click', () => {
      erlangModal.style.display = 'none';
    });

    erlangModal.addEventListener('click', (e) => {
      if (e.target === erlangModal) {
        erlangModal.style.display = 'none';
      }
    });
  </script>
</body>
</html>
